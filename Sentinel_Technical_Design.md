# Airwallex Sentinel æŠ€æœ¯è®¾è®¡æ–‡æ¡£

**ç‰ˆæœ¬ï¼š** 1.0
**æ—¥æœŸï¼š** 2025å¹´11æœˆ14æ—¥
**çŠ¶æ€ï¼š** è®¾è®¡è¯„å®¡ä¸­

---

## 1. éœ€æ±‚/ç›®æ ‡

### 1.1 äº§å“æ„¿æ™¯

Airwallex Sentinel æ˜¯ä¸€æ¬¾ AI é©±åŠ¨çš„æ¬ºè¯ˆæ”»å‡»é˜²å¾¡äº§å“ï¼Œé€šè¿‡è‡ªåŠ¨åŒ–åˆ†æé£é™©è­¦æŠ¥ã€å³æ—¶æµ‹è¯•å’Œéƒ¨ç½²ç­–ç•¥æ¥é˜²æ­¢æ”»å‡»ï¼Œå¹¶æä¾›äº‹ä»¶æŠ¥å‘Šå’Œå»ºè®®çš„åç»­æ­¥éª¤ï¼Œä¿æŠ¤å•†æˆ·è´¦æˆ·å…å—æœªæ¥æ”»å‡»ã€‚

**äº§å“æ ‡è¯­ï¼š** "Life is too short to worry about fraud attacks... read a book, enjoy the view... Airwallex Sentinel has got you covered."

### 1.2 æ ¸å¿ƒç›®æ ‡

#### ä¸šåŠ¡ç›®æ ‡
- **å‡å°‘å•†æˆ·æ¬ºè¯ˆæŸå¤±ï¼š** é€šè¿‡æ›´å¿«ã€æ›´ç²¾å‡†çš„æ¬ºè¯ˆç¼“è§£ï¼Œç›®æ ‡å‡å°‘ 30%-50% çš„å¡æµ‹è¯•å’Œå…¶ä»–æ”»å‡»å¸¦æ¥çš„è´¢åŠ¡å½±å“
- **æé«˜è¿è¥æ•ˆç‡ï¼š** ä¸ºå•†æˆ·å’Œå†…éƒ¨é£é™©è¿è¥å›¢é˜Ÿè‡ªåŠ¨åŒ–è­¦æŠ¥åˆ†æå’Œå“åº”å·¥ä½œæµï¼Œç›®æ ‡å‡å°‘ 60% çš„äººå·¥å·¥ä½œé‡
- **å¢å¼ºå•†æˆ·ä½“éªŒï¼š** æä¾›å®‰å¿ƒæ„Ÿå’Œç®€å•ã€å¼ºå¤§çš„å·¥å…·æ¥ç®¡ç†é£é™©ï¼Œæ— éœ€ä¸“ä¸šçš„æ¬ºè¯ˆçŸ¥è¯†
- **å»ºç«‹å¸‚åœºé¢†å¯¼åœ°ä½ï¼š** å°† Airwallex å®šä½ä¸º AI é©±åŠ¨çš„è‡ªä¸»æ¬ºè¯ˆé˜²å¾¡é¢†åŸŸçš„å¸‚åœºå…ˆè¡Œè€…

#### æŠ€æœ¯ç›®æ ‡
- **å®æ—¶æ£€æµ‹ï¼š** è­¦æŠ¥æ£€æµ‹å»¶è¿Ÿ < 1 ç§’ï¼ŒAI åˆ†ææ—¶é—´ < 5 ç§’
- **é«˜å¯ç”¨æ€§ï¼š** ç³»ç»Ÿå¯ç”¨æ€§ > 99.9%ï¼Œæ”¯æŒå¤šå¯ç”¨åŒºéƒ¨ç½²
- **å¯æ‰©å±•æ€§ï¼š** æ”¯æŒæ¯å¤©å¤„ç†æ•°ç™¾ä¸‡ç¬”äº¤æ˜“ï¼Œå³°å€¼ TPS è¾¾åˆ° 50,000
- **è‡ªåŠ¨åŒ–ç‡ï¼š** 80% çš„æ”»å‡»åœºæ™¯æ”¯æŒè‡ªåŠ¨éƒ¨ç½²è§„åˆ™

### 1.3 æ”¯æŒçš„æ”»å‡»ç±»å‹

| æ”»å‡»ç±»åˆ« | æ£€æµ‹æ–¹æ³• | ä¼˜å…ˆçº§ |
|---------|---------|--------|
| **å¡æµ‹è¯• (Card Testing)** | ç›‘æ§æ¥è‡ªå•ä¸€æ¥æºçš„å¤§é‡å°é¢å¤±è´¥äº¤æ˜“ï¼Œæ£€æµ‹è¿ç»­å¡å·æ¨¡å¼ | P1 |
| **é€Ÿç‡æ”»å‡» (Velocity Attacks)** | å®æ—¶è·Ÿè¸ªäº¤æ˜“é¢‘ç‡å’Œæ•°é‡ï¼Œå¯¹çªç„¶æ¿€å¢å‘å‡ºè­¦æŠ¥ | P1 |
| **è´¦æˆ·æ¥ç®¡ (Account Takeover)** | ä½¿ç”¨è¡Œä¸ºç”Ÿç‰©è¯†åˆ«å’Œå¼‚å¸¸æ£€æµ‹æ ‡è®°å¯ç–‘ç™»å½• | P2 |
| **æ‹’ä»˜æ¬ºè¯ˆ (Chargeback Fraud)** | åˆ†ææ‹’ä»˜æ•°æ®è¯†åˆ«é‡å¤æ¨¡å¼ | P2 |

### 1.4 æ ¸å¿ƒç”¨æˆ·æ•…äº‹

1. **ä½œä¸ºå•†æˆ·**ï¼Œæˆ‘å¸Œæœ›åœ¨åº”ç”¨ä¸­æ”¶åˆ°æ½œåœ¨æ¬ºè¯ˆæ”»å‡»çš„é€šçŸ¥ï¼Œä»¥ä¾¿æˆ‘å¯ä»¥ç«‹å³é‡‡å–è¡ŒåŠ¨
2. **ä½œä¸ºå•†æˆ·**ï¼Œæˆ‘å¸Œæœ›çœ‹åˆ°æ¬ºè¯ˆæ”»å‡»çš„ç®€å•ã€æ˜“äºç†è§£çš„æ‘˜è¦ï¼ŒåŒ…æ‹¬æ”»å‡»ç±»å‹åŠå…¶å½±å“
3. **ä½œä¸ºå•†æˆ·**ï¼Œæˆ‘å¸Œæœ›æœ‰ä¸€ä¸ªä¸€é”®æŒ‰é’®æ¥éƒ¨ç½²æ¨èçš„æ¬ºè¯ˆè§„åˆ™ï¼Œä»¥ä¾¿æˆ‘å¯ä»¥ç«‹å³é˜»æ­¢æ”»å‡»
4. **ä½œä¸ºå•†æˆ·**ï¼Œæˆ‘å¸Œæœ›ç³»ç»Ÿèƒ½è‡ªåŠ¨éƒ¨ç½²ä¸€äº›æ¬ºè¯ˆè§„åˆ™å¹¶ç«‹å³é˜»æ­¢æ”»å‡»ï¼Œä¸ºæˆ‘æä¾›äº‹ä»¶æ‘˜è¦
5. **ä½œä¸ºé£æ§è¿è¥äººå‘˜**ï¼Œæˆ‘å¸Œæœ›ç³»ç»Ÿèƒ½è‡ªåŠ¨ç”Ÿæˆå’Œä¼˜åŒ–è§„åˆ™ï¼Œå‡å°‘æ‰‹åŠ¨è§„åˆ™ç¼–å†™å·¥ä½œ

### 1.5 æˆåŠŸæŒ‡æ ‡

- **å•†æˆ·é‡‡ç”¨ç‡ï¼š** æ´»è·ƒå•†æˆ·ä¸­å¯ç”¨ Sentinel çš„ç™¾åˆ†æ¯” > 60%
- **è¯¯æŠ¥ç‡é™ä½ï¼š** ç›¸æ¯”äººå·¥æµç¨‹é™ä½ 30% ä»¥ä¸Š
- **ç¼“è§£æ—¶é—´ï¼š** ä»è­¦æŠ¥ç”Ÿæˆåˆ°è§„åˆ™éƒ¨ç½²çš„å¹³å‡æ—¶é—´ < 5 åˆ†é’Ÿ
- **æ¬ºè¯ˆæŸå¤±å‡å°‘ï¼š** ä½¿ç”¨ Sentinel çš„å•†æˆ·çš„æ‹’ä»˜ç‡å’Œæ¬ºè¯ˆæŸå¤±é™ä½ 30%-50%
- **è¿è¥æ•ˆç‡ï¼š** è§„åˆ™ç¼–å†™å’Œç»´æŠ¤çš„äººåŠ›æŠ•å…¥å‡å°‘ 60%

---

## 2. é¡µé¢åŠŸèƒ½

### 2.1 å‰ç«¯é¡µé¢ç»“æ„

```mermaid
graph TB
    subgraph "Sentinel ä»ªè¡¨æ¿"
        Dashboard[ä¸»ä»ªè¡¨æ¿]

        subgraph "è­¦æŠ¥ä¸­å¿ƒ"
            AlertList[è­¦æŠ¥åˆ—è¡¨]
            AlertDetail[è­¦æŠ¥è¯¦æƒ…é¡µ]
            AlertAnalysis[AI åˆ†ææŠ¥å‘Š]
        end

        subgraph "è§„åˆ™ç®¡ç†"
            RuleList[è§„åˆ™åˆ—è¡¨]
            RuleCreate[åˆ›å»ºè§„åˆ™]
            RuleDetail[è§„åˆ™è¯¦æƒ…]
            RulePerformance[è§„åˆ™æ€§èƒ½]
        end

        subgraph "é˜²æŠ¤æŠ¥å‘Š"
            Overview[é˜²æŠ¤æ¦‚è§ˆ]
            AttackHistory[æ”»å‡»å†å²]
            BlockStats[æ‹¦æˆªç»Ÿè®¡]
            TrendAnalysis[è¶‹åŠ¿åˆ†æ]
        end

        subgraph "è®¾ç½®"
            Notification[é€šçŸ¥è®¾ç½®]
            AutoConfig[è‡ªåŠ¨åŒ–é…ç½®]
            Threshold[é˜ˆå€¼é…ç½®]
        end
    end

    Dashboard --> AlertList
    Dashboard --> RuleList
    Dashboard --> Overview
    Dashboard --> Notification

    AlertList --> AlertDetail
    AlertDetail --> AlertAnalysis
    AlertDetail --> RuleCreate

    RuleList --> RuleDetail
    RuleDetail --> RulePerformance

    Overview --> AttackHistory
    Overview --> BlockStats
    Overview --> TrendAnalysis

    Notification --> AutoConfig
    AutoConfig --> Threshold

    style Dashboard fill:#e3f2fd
    style è­¦æŠ¥ä¸­å¿ƒ fill:#fff3e0
    style è§„åˆ™ç®¡ç† fill:#e8f5e9
    style é˜²æŠ¤æŠ¥å‘Š fill:#f3e5f5
    style è®¾ç½® fill:#fce4ec
```

### 2.2 æ ¸å¿ƒé¡µé¢åŠŸèƒ½è¯¦æƒ…

```mermaid
graph TB
    subgraph Dashboard["ğŸ“Š ä¸»ä»ªè¡¨æ¿"]
        D1["ğŸš¨ å®æ—¶è­¦æŠ¥æ•°é‡<br/>â”â”â”â”â”â”â”â”<br/>P1 è­¦æŠ¥ | P2 è­¦æŠ¥ | P3 è­¦æŠ¥"]
        D2["ğŸ›¡ï¸ ä»Šæ—¥æ‹¦æˆªç»Ÿè®¡"]
        D3["ğŸ“‹ æ´»è·ƒè§„åˆ™æ•°é‡"]
        D4["âš¡ å¿«æ·æ“ä½œå…¥å£"]
    end

    subgraph Alert["âš ï¸ è­¦æŠ¥è¯¦æƒ…é¡µ"]
        A1["ğŸ“Œ è­¦æŠ¥åŸºæœ¬ä¿¡æ¯<br/>â”â”â”â”â”â”â”â”<br/>â€¢ ä¼˜å…ˆçº§<br/>â€¢ åˆ›å»ºæ—¶é—´<br/>â€¢ çŠ¶æ€"]
        A2["ğŸ¤– AI åˆ†æç»“æœ<br/>â”â”â”â”â”â”â”â”<br/>â€¢ æ”»å‡»ç±»å‹è¯†åˆ«<br/>â€¢ ç½®ä¿¡åº¦è¯„åˆ†<br/>â€¢ å½±å“èŒƒå›´åˆ†æ<br/>â€¢ æ¨èæ“ä½œ"]
        A3["ğŸš€ ä¸€é”®éƒ¨ç½²æŒ‰é’®"]
        A4["ğŸ’¬ åé¦ˆæŒ‰é’®<br/>â”â”â”â”â”â”â”â”<br/>ğŸ‘ æœ‰ç”¨ | ğŸ‘ æ— ç”¨"]
    end

    subgraph Rules["ğŸ”§ è§„åˆ™ç®¡ç†é¡µ"]
        R1["ğŸ“ è§„åˆ™åˆ—è¡¨<br/>â”â”â”â”â”â”â”â”<br/>ç­›é€‰å™¨ï¼šçŠ¶æ€/ç±»å‹/æ—¶é—´<br/>æ’åºé€‰é¡¹<br/>æ‰¹é‡æ“ä½œ"]
        R2["ğŸ“„ è§„åˆ™è¯¦æƒ…<br/>â”â”â”â”â”â”â”â”<br/>â€¢ è§„åˆ™æ¡ä»¶<br/>â€¢ æ‰§è¡ŒåŠ¨ä½œ"]
        R3["ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡<br/>â”â”â”â”â”â”â”â”<br/>â€¢ ç²¾ç¡®ç‡<br/>â€¢ å¬å›ç‡<br/>â€¢ è¯¯æŠ¥ç‡"]
        R4["ğŸ§ª å½±å­æµ‹è¯•ç»“æœ"]
        R5["ğŸ“œ éƒ¨ç½²å†å²"]
    end

    subgraph Reports["ğŸ“Š é˜²æŠ¤æŠ¥å‘Š"]
        P1["ğŸ“‰ æ”»å‡»è¶‹åŠ¿å›¾"]
        P2["âœ… æ‹¦æˆªæ•ˆæœç»Ÿè®¡"]
        P3["ğŸ’° æŸå¤±é¿å…é‡‘é¢"]
        P4["ğŸ† è§„åˆ™è´¡çŒ®åº¦æ’å"]
        P5["ğŸ“¥ å¯¼å‡ºæŠ¥å‘Š"]
    end

    style Dashboard fill:#e3f2fd,stroke:#1976d2,stroke-width:3px,color:#000
    style Alert fill:#fff3e0,stroke:#f57c00,stroke-width:3px,color:#000
    style Rules fill:#e8f5e9,stroke:#388e3c,stroke-width:3px,color:#000
    style Reports fill:#f3e5f5,stroke:#7b1fa2,stroke-width:3px,color:#000

    style D1 fill:#bbdefb,stroke:#1976d2,stroke-width:2px,color:#000
    style D2 fill:#bbdefb,stroke:#1976d2,stroke-width:2px,color:#000
    style D3 fill:#bbdefb,stroke:#1976d2,stroke-width:2px,color:#000
    style D4 fill:#bbdefb,stroke:#1976d2,stroke-width:2px,color:#000

    style A1 fill:#ffe0b2,stroke:#f57c00,stroke-width:2px,color:#000
    style A2 fill:#ffe0b2,stroke:#f57c00,stroke-width:2px,color:#000
    style A3 fill:#ffe0b2,stroke:#f57c00,stroke-width:2px,color:#000
    style A4 fill:#ffe0b2,stroke:#f57c00,stroke-width:2px,color:#000

    style R1 fill:#c8e6c9,stroke:#388e3c,stroke-width:2px,color:#000
    style R2 fill:#c8e6c9,stroke:#388e3c,stroke-width:2px,color:#000
    style R3 fill:#c8e6c9,stroke:#388e3c,stroke-width:2px,color:#000
    style R4 fill:#c8e6c9,stroke:#388e3c,stroke-width:2px,color:#000
    style R5 fill:#c8e6c9,stroke:#388e3c,stroke-width:2px,color:#000

    style P1 fill:#e1bee7,stroke:#7b1fa2,stroke-width:2px,color:#000
    style P2 fill:#e1bee7,stroke:#7b1fa2,stroke-width:2px,color:#000
    style P3 fill:#e1bee7,stroke:#7b1fa2,stroke-width:2px,color:#000
    style P4 fill:#e1bee7,stroke:#7b1fa2,stroke-width:2px,color:#000
    style P5 fill:#e1bee7,stroke:#7b1fa2,stroke-width:2px,color:#000
```

### 2.3 å…³é”®ç”¨æˆ·ç•Œé¢æµç¨‹

```mermaid
flowchart TD
    Start([å•†æˆ·ç™»å½•]) --> Dashboard[æŸ¥çœ‹ä¸»ä»ªè¡¨æ¿]

    Dashboard --> CheckAlert{æœ‰æ–°è­¦æŠ¥?}

    CheckAlert -->|æ˜¯| ViewAlert[ç‚¹å‡»æŸ¥çœ‹è­¦æŠ¥]
    CheckAlert -->|å¦| ViewReports[æŸ¥çœ‹é˜²æŠ¤æŠ¥å‘Š]

    ViewAlert --> ReadAnalysis[é˜…è¯» AI åˆ†æ]
    ReadAnalysis --> DecideAction{å†³å®šé‡‡å–è¡ŒåŠ¨?}

    DecideAction -->|æ˜¯| ClickDeploy[ç‚¹å‡»ä¸€é”®éƒ¨ç½²]
    DecideAction -->|å¦| Dismiss[å¿½ç•¥è­¦æŠ¥]

    ClickDeploy --> ConfirmModal[ç¡®è®¤éƒ¨ç½²æ¨¡æ€æ¡†]
    ConfirmModal --> ReviewImpact[æŸ¥çœ‹å½±å“èŒƒå›´]
    ReviewImpact --> Confirm{ç¡®è®¤éƒ¨ç½²?}

    Confirm -->|æ˜¯| AutoBacktest[AI è‡ªåŠ¨è¿è¡Œå›æµ‹]
    Confirm -->|å¦| Cancel[å–æ¶ˆ]

    AutoBacktest --> BacktestResult{å›æµ‹ç»“æœ<br/>æ€§èƒ½è¾¾æ ‡?}

    BacktestResult -->|æ˜¯| DeployRule[éƒ¨ç½²è§„åˆ™]
    BacktestResult -->|å¦| ShowWarning[æ˜¾ç¤ºå›æµ‹è­¦å‘Š]

    ShowWarning --> MerchantDecide{å•†æˆ·å†³å®š}
    MerchantDecide -->|ç»§ç»­éƒ¨ç½²| DeployRule
    MerchantDecide -->|å–æ¶ˆ| Cancel

    DeployRule --> ShadowMode[è§„åˆ™è¿›å…¥å½±å­æ¨¡å¼]
    ShadowMode --> MonitorShadow[ç›‘æ§å½±å­æ€§èƒ½]
    MonitorShadow --> CheckPerf{æ€§èƒ½è‰¯å¥½?}

    CheckPerf -->|æ˜¯| GoLive[è§„åˆ™ä¸Šçº¿]
    CheckPerf -->|å¦| Tune[è°ƒä¼˜è§„åˆ™]

    GoLive --> ShowSuccess[æ˜¾ç¤ºæˆåŠŸæç¤º]
    ShowSuccess --> ViewProtection[æŸ¥çœ‹é˜²æŠ¤æ•ˆæœ]

    Tune --> ShadowMode

    ViewProtection --> SubmitFeedback[æäº¤åé¦ˆ]
    SubmitFeedback --> End([å®Œæˆ])

    Dismiss --> End
    Cancel --> End
    ViewReports --> End

    style AutoBacktest fill:#f3e5f5,stroke:#7b1fa2,stroke-width:3px
    style BacktestResult fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    style ShowWarning fill:#ffebee,stroke:#c62828,stroke-width:2px
    style Start fill:#c8e6c9
    style End fill:#ffcdd2
    style ClickDeploy fill:#fff59d
    style GoLive fill:#a5d6a7
```

---

## 3. ä¸šåŠ¡æµç¨‹

### 3.1 æ ¸å¿ƒä¸šåŠ¡æµç¨‹æ€»è§ˆ

```mermaid
graph TB
    subgraph "å®æ—¶ç›‘æ§"
        A1[äº¤æ˜“æµç›‘æ§]
        A2[æŒ‡æ ‡è®¡ç®—]
        A3[é˜ˆå€¼æ£€æŸ¥]
    end

    subgraph "è­¦æŠ¥ç”Ÿæˆ"
        B1[è§¦å‘è­¦æŠ¥]
        B2[æ•°æ®æ”¶é›†]
        B3[è­¦æŠ¥åˆ†ç±»]
    end

    subgraph "AI åˆ†æ"
        C1[ç‰¹å¾æå–]
        C2[æ¨¡å¼è¯†åˆ«]
        C3[æ”»å‡»åˆ†ç±»]
        C4[è§„åˆ™æ¨è]
    end

    subgraph "å•†æˆ·å†³ç­–"
        D1[é€šçŸ¥å•†æˆ·]
        D2[å±•ç¤ºåˆ†æ]
        D3[ç­‰å¾…æ“ä½œ]
    end

    subgraph "è§„åˆ™éƒ¨ç½²"
        E1[éªŒè¯è§„åˆ™]
        E1a[è‡ªåŠ¨å›æµ‹]
        E2[å½±å­éƒ¨ç½²]
        E3[æ€§èƒ½è¯„ä¼°]
        E4[ä¸Šçº¿éƒ¨ç½²]
    end

    subgraph "æŒç»­ä¼˜åŒ–"
        F1[æ”¶é›†åé¦ˆ]
        F2[æ€§èƒ½ç›‘æ§]
        F3[è§„åˆ™ä¼˜åŒ–]
        F4[æ¨¡å‹è®­ç»ƒ]
    end

    A1 --> A2 --> A3
    A3 -->|é˜ˆå€¼çªç ´| B1
    B1 --> B2 --> B3
    B3 --> C1 --> C2 --> C3 --> C4
    C4 --> D1 --> D2 --> D3
    D3 -->|ä¸€é”®éƒ¨ç½²| E1
    D3 -->|è‡ªåŠ¨éƒ¨ç½²| E1
    E1 --> E1a --> E2 --> E3 --> E4
    E4 --> F1
    D2 --> F1
    F1 --> F2 --> F3 --> F4
    F4 -.æ¨¡å‹æ›´æ–°.-> C2

    style å®æ—¶ç›‘æ§ fill:#e3f2fd
    style è­¦æŠ¥ç”Ÿæˆ fill:#fff3e0
    style AIåˆ†æ fill:#f3e5f5
    style å•†æˆ·å†³ç­– fill:#e8f5e9
    style è§„åˆ™éƒ¨ç½² fill:#ffe0b2
    style æŒç»­ä¼˜åŒ– fill:#d1c4e9
```

### 3.2 ä¸€é”®éƒ¨ç½²æµç¨‹è¯¦ç»†è®¾è®¡

```mermaid
sequenceDiagram
    autonumber
    actor Merchant as å•†æˆ·
    participant UI as å‰ç«¯ç•Œé¢
    participant API as API ç½‘å…³
    participant Alert as è­¦æŠ¥æœåŠ¡
    participant AI as AI å¼•æ“
    participant Deploy as éƒ¨ç½²å¼•æ“
    participant Shadow as å½±å­ç¯å¢ƒ
    participant Risk as é£é™©å¼•æ“
    participant Notify as é€šçŸ¥æœåŠ¡

    Note over Merchant,Notify: åœºæ™¯ï¼šå•†æˆ·æ”¶åˆ°è­¦æŠ¥å¹¶æ‰§è¡Œä¸€é”®éƒ¨ç½²

    Alert->>UI: æ¨é€æ–°è­¦æŠ¥
    UI->>Merchant: æ˜¾ç¤ºé€šçŸ¥å¾½ç« 

    Merchant->>UI: ç‚¹å‡»æŸ¥çœ‹è­¦æŠ¥
    UI->>API: GET /api/v1/alerts/{id}
    API->>Alert: æŸ¥è¯¢è­¦æŠ¥
    Alert->>AI: è·å– AI åˆ†æç»“æœ
    AI-->>Alert: è¿”å›åˆ†ææŠ¥å‘Š
    Alert-->>API: è¿”å›å®Œæ•´æ•°æ®
    API-->>UI: è¿”å› JSON
    UI->>Merchant: å±•ç¤ºè­¦æŠ¥è¯¦æƒ…å’Œ AI åˆ†æ

    Note over Merchant: å•†æˆ·å®¡é˜…<br/>AI æ¨èè§„åˆ™

    Merchant->>UI: ç‚¹å‡»"ä¸€é”®éƒ¨ç½²"
    UI->>Merchant: æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†
    Merchant->>UI: ç¡®è®¤éƒ¨ç½²

    UI->>API: POST /api/v1/rules/deploy
    API->>Deploy: åˆ›å»ºéƒ¨ç½²ä»»åŠ¡

    par å¹¶è¡ŒéªŒè¯
        Deploy->>Deploy: è¯­æ³•éªŒè¯
    and
        Deploy->>Deploy: å†²çªæ£€æµ‹
    and
        Deploy->>Deploy: å½±å“èŒƒå›´è¯„ä¼°
    end

    Deploy->>Shadow: éƒ¨ç½²åˆ°å½±å­ç¯å¢ƒ
    Deploy->>UI: è¿”å›éƒ¨ç½² ID
    UI->>Merchant: æ˜¾ç¤º"å½±å­æ¨¡å¼è¿è¡Œä¸­"

    loop æ¯ 30 ç§’æ›´æ–°ä¸€æ¬¡ (æŒç»­ 5-10 åˆ†é’Ÿ)
        Shadow->>Deploy: ä¸ŠæŠ¥æ€§èƒ½æŒ‡æ ‡
        Deploy->>API: æ¨é€æ›´æ–°
        API->>UI: WebSocket æ¨é€
        UI->>Merchant: æ›´æ–°ç›‘æ§å›¾è¡¨
    end

    Deploy->>Deploy: è¯„ä¼°å½±å­æ€§èƒ½

    alt æ€§èƒ½è¾¾æ ‡
        Deploy->>Risk: ä¸Šçº¿è§„åˆ™
        Risk-->>Deploy: ç¡®è®¤ä¸Šçº¿
        Deploy->>Notify: å‘é€æˆåŠŸé€šçŸ¥
        Notify->>Merchant: é‚®ä»¶/çŸ­ä¿¡/åº”ç”¨å†…é€šçŸ¥
        Deploy->>UI: æ¨é€ä¸Šçº¿æˆåŠŸ
        UI->>Merchant: æ˜¾ç¤ºåº†ç¥åŠ¨ç”» + "Read a Book" è§†å›¾
    else æ€§èƒ½ä¸ä½³
        Deploy->>Notify: å‘é€ä¼˜åŒ–å»ºè®®
        Notify->>Merchant: é€šçŸ¥éœ€è¦è°ƒæ•´
        Deploy->>UI: æ¨é€ä¼˜åŒ–å»ºè®®
        UI->>Merchant: æ˜¾ç¤ºè°ƒä¼˜å»ºè®®
    end

    Merchant->>UI: æŸ¥çœ‹è§„åˆ™è¯¦æƒ…
    UI->>API: GET /api/v1/rules/{id}/metrics
    API-->>UI: è¿”å›å®æ—¶æŒ‡æ ‡
    UI->>Merchant: å±•ç¤ºæ‹¦æˆªç»Ÿè®¡

    Merchant->>UI: æäº¤åé¦ˆ (ğŸ‘)
    UI->>API: POST /api/v1/feedback
    API->>AI: è®°å½•æ­£åé¦ˆ
    AI->>AI: æ›´æ–°è®­ç»ƒæ•°æ®é›†
```

### 3.3 è‡ªåŠ¨éƒ¨ç½²æµç¨‹ï¼ˆAuto-On æ¨¡å¼ï¼‰

```mermaid
flowchart TD
    Start([æ£€æµ‹åˆ°æ¬ºè¯ˆæ”»å‡»]) --> CollectData[æ”¶é›†äº¤æ˜“æ•°æ®]
    CollectData --> AIAnalysis[AI åˆ†æå¼•æ“]

    AIAnalysis --> ExtractFeatures[ç‰¹å¾æå–]
    ExtractFeatures --> RunModels[è¿è¡Œ ML æ¨¡å‹]

    RunModels --> ClassifyAttack[æ”»å‡»ç±»å‹åˆ†ç±»]
    ClassifyAttack --> CalcConfidence[è®¡ç®—ç½®ä¿¡åº¦]

    CalcConfidence --> CheckConfidence{ç½®ä¿¡åº¦ >= 0.9<br/>ä¸”<br/>å·²çŸ¥æ”»å‡»æ¨¡å¼?}

    CheckConfidence -->|æ˜¯| AutoMode[è¿›å…¥è‡ªåŠ¨æ¨¡å¼]
    CheckConfidence -->|å¦| ManualMode[è¿›å…¥äººå·¥æ¨¡å¼]

    AutoMode --> GenRule[ç”Ÿæˆè§„åˆ™]
    GenRule --> ValidateRule[éªŒè¯è§„åˆ™]
    ValidateRule --> CheckConflict{è§„åˆ™å†²çª?}

    CheckConflict -->|æ˜¯| ResolveConflict[è§£å†³å†²çª]
    CheckConflict -->|å¦| ShadowDeploy[å½±å­éƒ¨ç½²]

    ResolveConflict --> ShadowDeploy

    ShadowDeploy --> MonitorShadow[ç›‘æ§ 5 åˆ†é’Ÿ]
    MonitorShadow --> EvalMetrics[è¯„ä¼°æŒ‡æ ‡]

    EvalMetrics --> CheckMetrics{ç²¾ç¡®ç‡ > 95%<br/>ä¸”<br/>è¯¯æŠ¥ç‡ < 1%?}

    CheckMetrics -->|æ˜¯| AutoLive[è‡ªåŠ¨ä¸Šçº¿]
    CheckMetrics -->|å¦| NeedTuning{å¯è°ƒä¼˜?}

    NeedTuning -->|æ˜¯| TuneRule[è‡ªåŠ¨è°ƒä¼˜]
    NeedTuning -->|å¦| EscalateHuman[å‡çº§äººå·¥å¤„ç†]

    TuneRule --> ShadowDeploy

    AutoLive --> UpdateRiskEngine[æ›´æ–°é£é™©å¼•æ“]
    UpdateRiskEngine --> NotifyMerchant[é€šçŸ¥å•†æˆ·]
    NotifyMerchant --> StartBlocking[å¼€å§‹æ‹¦æˆª]

    StartBlocking --> MonitorLive[æŒç»­ç›‘æ§]
    MonitorLive --> CollectFeedback[æ”¶é›†åé¦ˆ]
    CollectFeedback --> End([å®Œæˆ])

    ManualMode --> NotifyForReview[é€šçŸ¥å•†æˆ·å®¡æ ¸]
    NotifyForReview --> End

    EscalateHuman --> NotifyOps[é€šçŸ¥è¿è¥å›¢é˜Ÿ]
    NotifyOps --> End

    style AutoMode fill:#a5d6a7
    style AutoLive fill:#66bb6a
    style ManualMode fill:#fff59d
    style EscalateHuman fill:#ffab91
```

### 3.4 è§„åˆ™è‡ªåŠ¨ç”Ÿæˆä¸ä¼˜åŒ–æµç¨‹

```mermaid
stateDiagram-v2
    [*] --> DataCollection: è§¦å‘æ¡ä»¶æ»¡è¶³

    DataCollection --> FeatureEngineering: æ•°æ®å‡†å¤‡å®Œæˆ
    note right of DataCollection
        è§¦å‘æ¡ä»¶ï¼š
        - å®šæœŸä»»åŠ¡ (æ¯æ—¥)
        - æ€§èƒ½ä¸‹é™
        - æ–°æ”»å‡»æ¨¡å¼
    end note

    FeatureEngineering --> AlgorithmSelection: ç‰¹å¾å°±ç»ª

    AlgorithmSelection --> XGBoost: åˆ†ç±»ä»»åŠ¡
    AlgorithmSelection --> Greedy: ä¼˜åŒ–ä»»åŠ¡
    AlgorithmSelection --> Clustering: èšç±»ä»»åŠ¡

    XGBoost --> RuleGeneration
    Greedy --> RuleGeneration
    Clustering --> RuleGeneration

    RuleGeneration --> Validation: è§„åˆ™å€™é€‰é›†

    Validation --> SyntaxCheck: å¼€å§‹éªŒè¯
    SyntaxCheck --> ConflictCheck: è¯­æ³•é€šè¿‡
    ConflictCheck --> PerformanceTest: æ— å†²çª

    PerformanceTest --> BacktestEval: è¿è¡Œå›æµ‹
    BacktestEval --> MetricsCheck: è®¡ç®—æŒ‡æ ‡

    MetricsCheck --> Approved: æŒ‡æ ‡è¾¾æ ‡
    MetricsCheck --> Rejected: æŒ‡æ ‡ä¸è¾¾æ ‡
    MetricsCheck --> NeedsTuning: æ¥è¿‘è¾¾æ ‡

    NeedsTuning --> Optimization: è‡ªåŠ¨è°ƒä¼˜
    Optimization --> BacktestEval: é‡æ–°æµ‹è¯•

    Approved --> ShadowDeployment: æ‰¹å‡†éƒ¨ç½²
    ShadowDeployment --> ShadowMonitoring: å½±å­è¿è¡Œ

    ShadowMonitoring --> LiveDeployment: æ€§èƒ½è‰¯å¥½
    ShadowMonitoring --> Optimization: éœ€è¦è°ƒä¼˜

    LiveDeployment --> ProductionMonitoring: ä¸Šçº¿
    ProductionMonitoring --> Active: ç¨³å®šè¿è¡Œ

    Active --> PerformanceDegradation: æ€§èƒ½ä¸‹é™
    Active --> RuleRetirement: è§„åˆ™è¿‡æœŸ

    PerformanceDegradation --> Optimization: å°è¯•ä¼˜åŒ–

    RuleRetirement --> Deprecated: æ ‡è®°åºŸå¼ƒ
    Deprecated --> [*]

    Rejected --> [*]

    note left of Approved
        è¾¾æ ‡æ¡ä»¶ï¼š
        - ç²¾ç¡®ç‡ > 90%
        - å¬å›ç‡ > 80%
        - è¯¯æŠ¥ç‡ < 2%
    end note
```

---

## 4. æŠ€æœ¯æ¶æ„

### 4.1 æ•´ä½“æŠ€æœ¯æ¶æ„

```mermaid
C4Context
    title Airwallex Sentinel ç³»ç»Ÿæ¶æ„å›¾ (C4 - Level 1)

    Person(merchant, "å•†æˆ·", "ä½¿ç”¨ Sentinel<br/>é˜²å¾¡æ¬ºè¯ˆæ”»å‡»")
    Person(ops, "é£æ§è¿è¥", "ç®¡ç†è§„åˆ™å’Œ<br/>ç›‘æ§ç³»ç»Ÿ")

    System_Boundary(sentinel, "Airwallex Sentinel") {
        System(webapp, "Sentinel Web App", "React å‰ç«¯åº”ç”¨<br/>å•†æˆ·ä»ªè¡¨æ¿")
        System(api, "API ç½‘å…³", "FastAPI<br/>ç»Ÿä¸€æ¥å£å±‚")
        System(core, "Sentinel æ ¸å¿ƒ", "æ¬ºè¯ˆæ£€æµ‹<br/>AI åˆ†æ<br/>è§„åˆ™éƒ¨ç½²")
        System(automation, "è‡ªåŠ¨åŒ–å¹³å°", "è§„åˆ™ç”Ÿæˆ<br/>æ¨¡å‹è®­ç»ƒ<br/>è§„åˆ™æ²»ç†")
    }

    System_Ext(riskengine, "é£é™©å¼•æ“", "ç°æœ‰ç³»ç»Ÿ<br/>è§„åˆ™æ‰§è¡Œ")
    System_Ext(kafka, "Kafka", "äº¤æ˜“äº‹ä»¶æµ")
    System_Ext(bigquery, "BigQuery", "æ•°æ®ä»“åº“")

    Rel(merchant, webapp, "ä½¿ç”¨", "HTTPS")
    Rel(ops, webapp, "ä½¿ç”¨", "HTTPS")

    Rel(webapp, api, "è°ƒç”¨", "REST/WebSocket")
    Rel(api, core, "è°ƒç”¨", "gRPC")
    Rel(api, automation, "è°ƒç”¨", "gRPC")

    Rel(core, riskengine, "åŒæ­¥è§„åˆ™", "gRPC")
    Rel(core, kafka, "æ¶ˆè´¹äº‹ä»¶", "Kafka Protocol")

    Rel(automation, bigquery, "æŸ¥è¯¢æ•°æ®", "SQL")
    Rel(automation, riskengine, "æ›´æ–°è§„åˆ™", "gRPC")

    UpdateLayoutConfig($c4ShapeInRow="3", $c4BoundaryInRow="1")
```

### 4.2 æ ¸å¿ƒæœåŠ¡æ¶æ„

```mermaid
flowchart TB
    subgraph FrontendLayer["å‰ç«¯å±‚"]
        direction LR
        WebApp["Web åº”ç”¨<br/>&lt;br&gt;React + TypeScript"]
        Mobile["ç§»åŠ¨ç«¯<br/>&lt;br&gt;React Native"]
        SentinelCore["Sentinelæ ¸å¿ƒæœåŠ¡"]
        DataWarehouse["æ•°æ®ä¸AIå±‚"]
    end

    subgraph GatewayLayer["æ¥å…¥å±‚"]
        direction LR
        CDN["CDN / CloudFlare"]
        LoadBalancer["è´Ÿè½½å‡è¡¡<br/>&lt;br&gt;4å±‚"]
        APIGateway["API ç½‘å…³<br/>&lt;br&gt;Kong / APISIX"]
    end

    subgraph AppServiceLayer["åº”ç”¨æœåŠ¡å±‚"]
        direction LR

        subgraph BaseServices["åŸºç¡€æœåŠ¡"]
            AuthSvc["è®¤è¯æœåŠ¡<br/>&lt;br&gt;Go"]
            ConfigSvc["é…ç½®æœåŠ¡<br/>&lt;br&gt;Go"]
        end
    end

    subgraph SentinelCoreLayer["Sentinel æ ¸å¿ƒæœåŠ¡"]
        direction LR

        subgraph CoreServices["æ ¸å¿ƒæœåŠ¡"]
            AlertSvc["è­¦æŠ¥æœåŠ¡<br/>&lt;br&gt;Go"]
            PredictSvc["é¢„æµ‹æœåŠ¡<br/>&lt;br&gt;Python/Fast<br/>API"]
            AISvc["AI åˆ†ææœåŠ¡<br/>&lt;br&gt;Python/Fast<br/>API"]
        end
    end

    subgraph AutomationLayer["è‡ªåŠ¨åŒ–å¹³å°æœåŠ¡"]
        direction LR
        RuleGenSvc["è§„åˆ™ç”ŸæˆæœåŠ¡<br/>&lt;br&gt;Python"]
        ModelSvc["æ¨¡å‹æœåŠ¡<br/>&lt;br&gt;Python"]
        BacktestSvc["å›æµ‹æœåŠ¡<br/>&lt;br&gt;Python/Sp<br/>ark"]
        GovernSvc["æ²»ç†æœåŠ¡<br/>&lt;br&gt;Pytho<br/>n"]
    end

    subgraph ExternalLayer["å¤–éƒ¨ç³»ç»Ÿ"]
        direction LR
        RiskEngine["é£é™©å¼•æ“"]
        MailSvc["é‚®ä»¶æœåŠ¡"]
        SmsSvc["çŸ­ä¿¡æœåŠ¡"]
    end

    subgraph DataAILayer["æ•°æ®ä¸ AI å±‚"]
        direction LR
        StreamProc["æµå¤„ç†<br/>&lt;br&gt;Flin<br/>k"]
        BatchProc["æ‰¹å¤„ç†<br/>&lt;br&gt;Spa<br/>rk"]
        ModelServing["æ¨¡å‹æœåŠ¡<br/>&lt;br&gt;TF<br/>Serving"]
        FeatureStore["ç‰¹å¾å­˜å‚¨<br/>&lt;br&gt;Feast"]
    end

    subgraph StorageLayer["æ•°æ®å­˜å‚¨å±‚"]
        direction LR
        PostgreSQL["PostgreSQL<br/>&lt;br&gt;OLTP"]
        Redis["Redis<br/>&lt;br&gt;ç¼“<br/>å­˜"]
        Kafka["Kafka&lt;br&gt;&lt;br&gt;æ¶ˆæ¯é˜Ÿ<br/>åˆ—"]
        BigQuery["BigQuery&lt;br&gt;<br/>&lt;br&gt;OLAP"]
        S3["S3&lt;br&gt;å¯¹<br/>è±¡å­˜å‚¨"]
    end

    FrontendLayer --> GatewayLayer

    CDN --> LoadBalancer
    LoadBalancer --> APIGateway

    APIGateway --> AuthSvc
    APIGateway --> ConfigSvc

    AuthSvc -.è®¤è¯.-> AlertSvc
    AuthSvc -.è®¤è¯.-> PredictSvc
    ConfigSvc -.é…ç½®.-> AlertSvc
    ConfigSvc -.é…ç½®.-> PredictSvc

    APIGateway --> AlertSvc
    APIGateway --> PredictSvc
    APIGateway --> AISvc

    AlertSvc --> RuleGenSvc
    PredictSvc --> RuleGenSvc
    AISvc --> RuleGenSvc

    AlertSvc --> ModelSvc
    PredictSvc --> ModelSvc
    AISvc --> ModelSvc

    RuleGenSvc --> BacktestSvc
    ModelSvc --> BacktestSvc

    CoreServices --> RiskEngine
    CoreServices --> MailSvc
    CoreServices --> SmsSvc

    AutomationLayer --> StreamProc
    AutomationLayer --> BatchProc
    AutomationLayer --> ModelServing
    AutomationLayer --> FeatureStore

    SentinelCoreLayer --> PostgreSQL
    SentinelCoreLayer --> Redis
    SentinelCoreLayer --> Kafka

    DataAILayer --> BigQuery
    DataAILayer --> S3
    DataAILayer --> FeatureStore

    StreamProc --> Kafka
    BatchProc --> BigQuery
    ModelServing --> FeatureStore

    style FrontendLayer fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    style GatewayLayer fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    style AppServiceLayer fill:#fff9c4,stroke:#f9a825,stroke-width:2px
    style BaseServices fill:#fff59d,stroke:#f9a825,stroke-width:1px
    style SentinelCoreLayer fill:#e8f5e9,stroke:#388e3c,stroke-width:3px
    style CoreServices fill:#c8e6c9,stroke:#388e3c,stroke-width:2px
    style AutomationLayer fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    style ExternalLayer fill:#efebe9,stroke:#5d4037,stroke-width:2px
    style DataAILayer fill:#e0f2f1,stroke:#00796b,stroke-width:2px
    style StorageLayer fill:#fce4ec,stroke:#c2185b,stroke-width:2px
```

### 4.3 æ•°æ®æµæ¶æ„

```mermaid
flowchart LR
    subgraph "æ•°æ®æº"
        TxnStream[äº¤æ˜“äº‹ä»¶æµ]
        UserEvents[ç”¨æˆ·è¡Œä¸ºäº‹ä»¶]
        ExtData[å¤–éƒ¨æ•°æ®]
    end

    subgraph "å®æ—¶å±‚"
        Kafka[Kafka<br/>æ¶ˆæ¯é˜Ÿåˆ—]
        Flink[Flink<br/>æµå¤„ç†]
        Redis[Redis<br/>å®æ—¶ç¼“å­˜]
    end

    subgraph "ç¦»çº¿å±‚"
        BQ[BigQuery<br/>æ•°æ®ä»“åº“]
        Spark[Spark<br/>æ‰¹å¤„ç†]
        S3[S3<br/>æ•°æ®æ¹–]
    end

    subgraph "ç‰¹å¾å±‚"
        FeatureCalc[ç‰¹å¾è®¡ç®—]
        FeatureStore[ç‰¹å¾å­˜å‚¨<br/>Feast]
    end

    subgraph "åº”ç”¨å±‚"
        AlertEngine[è­¦æŠ¥å¼•æ“]
        AIEngine[AI å¼•æ“]
        RuleEngine[è§„åˆ™å¼•æ“]
        Training[æ¨¡å‹è®­ç»ƒ]
    end

    TxnStream --> Kafka
    UserEvents --> Kafka
    ExtData --> Kafka

    Kafka --> Flink
    Flink --> FeatureCalc
    Flink --> Redis

    Kafka --> BQ
    BQ --> Spark
    Spark --> FeatureCalc
    Spark --> S3

    FeatureCalc --> FeatureStore

    FeatureStore --> AlertEngine
    FeatureStore --> AIEngine
    FeatureStore --> Training

    Redis --> AlertEngine
    Redis --> AIEngine

    BQ --> Training
    S3 --> Training

    style å®æ—¶å±‚ fill:#e3f2fd
    style ç¦»çº¿å±‚ fill:#fff3e0
    style ç‰¹å¾å±‚ fill:#f3e5f5
    style åº”ç”¨å±‚ fill:#e8f5e9
```

### 4.4 éƒ¨ç½²æ¶æ„

```mermaid
graph TB
    subgraph "åŒºåŸŸ 1 - ä¸»åŒºåŸŸ"
        subgraph "K8s é›†ç¾¤ 1"
            NS1_1[Namespace: sentinel-prod<br/>API Pods x3<br/>Alert Pods x2<br/>AI Pods x2]
            NS1_2[Namespace: automation<br/>RuleGen Pods x2<br/>Training Pods x2]
        end

        subgraph "æ•°æ®åº“é›†ç¾¤ 1"
            PG1[PostgreSQL Primary]
            Redis1[Redis Master x3]
        end
    end

    subgraph "åŒºåŸŸ 2 - å¤‡ç”¨åŒºåŸŸ"
        subgraph "K8s é›†ç¾¤ 2"
            NS2_1[Namespace: sentinel-prod<br/>API Pods x3<br/>Alert Pods x2<br/>AI Pods x2]
            NS2_2[Namespace: automation<br/>RuleGen Pods x2<br/>Training Pods x2]
        end

        subgraph "æ•°æ®åº“é›†ç¾¤ 2"
            PG2[PostgreSQL Replica]
            Redis2[Redis Replica x3]
        end
    end

    subgraph "å…±äº«æœåŠ¡å±‚"
        ALB[Application Load Balancer]
        Kafka_Cluster[Kafka Cluster<br/>3 Brokers]
        BQ[BigQuery]
        S3[S3 / GCS]
    end

    Internet([äº’è”ç½‘]) --> ALB

    ALB --> NS1_1
    ALB --> NS2_1

    NS1_1 --> PG1
    NS1_1 --> Redis1
    NS1_1 --> Kafka_Cluster

    NS2_1 --> PG2
    NS2_1 --> Redis2
    NS2_1 --> Kafka_Cluster

    NS1_2 --> BQ
    NS1_2 --> S3
    NS2_2 --> BQ
    NS2_2 --> S3

    PG1 -.å¤åˆ¶.-> PG2
    Redis1 -.å¤åˆ¶.-> Redis2

    style åŒºåŸŸ1-ä¸»åŒºåŸŸ fill:#e3f2fd
    style åŒºåŸŸ2-å¤‡ç”¨åŒºåŸŸ fill:#fff3e0
    style å…±äº«æœåŠ¡å±‚ fill:#f3e5f5
```

---

## 5. å­æ¨¡å—åˆ’åˆ†

### 5.1 æ¨¡å—æ€»è§ˆ

```mermaid
graph TB
    subgraph "å‰ç«¯æ¨¡å—"
        FE1[Dashboard æ¨¡å—]
        FE2[Alert æ¨¡å—]
        FE3[Rule æ¨¡å—]
        FE4[Report æ¨¡å—]
        FE5[Settings æ¨¡å—]
    end

    subgraph "åç«¯æ ¸å¿ƒæ¨¡å—"
        BE1[API ç½‘å…³æ¨¡å—]
        BE2[è®¤è¯æˆæƒæ¨¡å—]
        BE3[è­¦æŠ¥æ£€æµ‹æ¨¡å—]
        BE4[AI åˆ†ææ¨¡å—]
        BE5[è§„åˆ™éƒ¨ç½²æ¨¡å—]
        BE6[é€šçŸ¥æ¨¡å—]
    end

    subgraph "è‡ªåŠ¨åŒ–æ¨¡å—"
        AUTO1[è§„åˆ™ç”Ÿæˆæ¨¡å—]
        AUTO2[æ¨¡å‹è®­ç»ƒæ¨¡å—]
        AUTO3[å›æµ‹æ¨¡å—]
        AUTO4[è§„åˆ™æ²»ç†æ¨¡å—]
        AUTO5[ç›‘æ§ä¼˜åŒ–æ¨¡å—]
    end

    subgraph "æ•°æ®æ¨¡å—"
        DATA1[ç‰¹å¾å·¥ç¨‹æ¨¡å—]
        DATA2[æµå¤„ç†æ¨¡å—]
        DATA3[æ‰¹å¤„ç†æ¨¡å—]
        DATA4[æ•°æ®å­˜å‚¨æ¨¡å—]
    end

    subgraph "åŸºç¡€è®¾æ–½æ¨¡å—"
        INFRA1[é…ç½®ä¸­å¿ƒ]
        INFRA2[æœåŠ¡å‘ç°]
        INFRA3[ç›‘æ§å‘Šè­¦]
        INFRA4[æ—¥å¿—æ”¶é›†]
    end

    FE1 & FE2 & FE3 & FE4 & FE5 --> BE1
    BE1 --> BE2
    BE2 --> BE3 & BE5
    BE3 --> BE4
    BE4 --> BE5
    BE5 --> BE6

    BE3 & BE4 --> DATA2
    AUTO1 & AUTO2 & AUTO3 --> DATA3
    DATA2 & DATA3 --> DATA1
    DATA1 --> DATA4

    BE3 & BE4 & BE5 --> INFRA1
    BE1 & BE3 & BE4 & BE5 --> INFRA2
    BE1 & BE3 & BE4 & BE5 --> INFRA3
    BE1 & BE3 & BE4 & BE5 --> INFRA4

    style å‰ç«¯æ¨¡å— fill:#e3f2fd
    style åç«¯æ ¸å¿ƒæ¨¡å— fill:#fff3e0
    style è‡ªåŠ¨åŒ–æ¨¡å— fill:#f3e5f5
    style æ•°æ®æ¨¡å— fill:#e8f5e9
    style åŸºç¡€è®¾æ–½æ¨¡å— fill:#fce4ec
```

### 5.2 æ ¸å¿ƒæ¨¡å—è¯¦ç»†åˆ’åˆ†

```mermaid
mindmap
  root((Sentinel æ¨¡å—))
    å‰ç«¯æ¨¡å—
      Dashboard æ¨¡å—
        å®æ—¶æ•°æ®å±•ç¤º
        å›¾è¡¨ç»„ä»¶
        å¿«æ·æ“ä½œ
      Alert æ¨¡å—
        è­¦æŠ¥åˆ—è¡¨
        è­¦æŠ¥è¯¦æƒ…
        AI åˆ†æå±•ç¤º
        ä¸€é”®éƒ¨ç½² UI
      Rule æ¨¡å—
        è§„åˆ™åˆ—è¡¨
        è§„åˆ™è¯¦æƒ…
        æ€§èƒ½ç›‘æ§
        é…ç½®ç®¡ç†
      Report æ¨¡å—
        æ”»å‡»å†å²
        æ‹¦æˆªç»Ÿè®¡
        è¶‹åŠ¿åˆ†æ
        æŠ¥è¡¨å¯¼å‡º
      Settings æ¨¡å—
        é€šçŸ¥é…ç½®
        è‡ªåŠ¨åŒ–è®¾ç½®
        é˜ˆå€¼ç®¡ç†

    åç«¯æ ¸å¿ƒæ¨¡å—
      API ç½‘å…³æ¨¡å—
        è·¯ç”±ç®¡ç†
        åè®®è½¬æ¢
        æµé‡æ§åˆ¶
        API èšåˆ

      è­¦æŠ¥æ£€æµ‹æ¨¡å—
        æŒ‡æ ‡ç›‘æ§å™¨
          å®æ—¶æŒ‡æ ‡è®¡ç®—
          æ»‘åŠ¨çª—å£ç»Ÿè®¡
        é˜ˆå€¼æ£€æŸ¥å™¨
          åŠ¨æ€é˜ˆå€¼
          å¤šç»´åº¦æ£€æŸ¥
        è­¦æŠ¥ç”Ÿæˆå™¨
          è­¦æŠ¥åˆ†ç±»
          ä¼˜å…ˆçº§åˆ¤å®š
          æ•°æ®æ”¶é›†

      AI åˆ†ææ¨¡å—
        ç‰¹å¾æå–å™¨
          å®æ—¶ç‰¹å¾
          å†å²ç‰¹å¾
        æ¨¡å‹æ¨ç†å¼•æ“
          åˆ†ç±»æ¨¡å‹
          èšç±»æ¨¡å‹
          å¼‚å¸¸æ£€æµ‹
        è§„åˆ™æ¨èå™¨
          è§„åˆ™ç”Ÿæˆ
          ç½®ä¿¡åº¦è®¡ç®—
          å½±å“è¯„ä¼°

      è§„åˆ™éƒ¨ç½²æ¨¡å—
        è§„åˆ™éªŒè¯å™¨
          è¯­æ³•æ£€æŸ¥
          å†²çªæ£€æµ‹
        å½±å­éƒ¨ç½²å™¨
          æµé‡åˆ‡åˆ†
          æ€§èƒ½ç›‘æ§
        ä¸Šçº¿ç®¡ç†å™¨
          ç°åº¦å‘å¸ƒ
          è‡ªåŠ¨å›æ»š

      é€šçŸ¥æ¨¡å—
        æ¶ˆæ¯è·¯ç”±
        æ¨¡æ¿å¼•æ“
        å¤šæ¸ é“å‘é€
        å‘é€çŠ¶æ€è¿½è¸ª

    è‡ªåŠ¨åŒ–æ¨¡å—
      è§„åˆ™ç”Ÿæˆæ¨¡å—
        æ•°æ®å‡†å¤‡å™¨
        ç®—æ³•é€‰æ‹©å™¨
        è§„åˆ™è®­ç»ƒå™¨
        è§„åˆ™ä¼˜åŒ–å™¨

      æ¨¡å‹è®­ç»ƒæ¨¡å—
        ç‰¹å¾å·¥ç¨‹
        æ¨¡å‹è®­ç»ƒ
        æ¨¡å‹è¯„ä¼°
        æ¨¡å‹æ³¨å†Œ

      å›æµ‹æ¨¡å—
        å†å²æ•°æ®åŠ è½½
        è§„åˆ™æ¨¡æ‹Ÿ
        æ€§èƒ½è®¡ç®—
        æŠ¥å‘Šç”Ÿæˆ

      è§„åˆ™æ²»ç†æ¨¡å—
        æ€§èƒ½ç›‘æ§
        è‡ªåŠ¨é€€å½¹
        å†²çªç®¡ç†
        ç‰ˆæœ¬æ§åˆ¶

      ç›‘æ§ä¼˜åŒ–æ¨¡å—
        æŒ‡æ ‡æ”¶é›†
        å¼‚å¸¸æ£€æµ‹
        è‡ªåŠ¨è°ƒä¼˜
        æŠ¥å‘Šç”Ÿæˆ

    æ•°æ®æ¨¡å—
      ç‰¹å¾å·¥ç¨‹æ¨¡å—
        ç‰¹å¾è®¡ç®—
        ç‰¹å¾å­˜å‚¨
        ç‰¹å¾æœåŠ¡

      æµå¤„ç†æ¨¡å—
        äº‹ä»¶æ¶ˆè´¹
        å®æ—¶èšåˆ
        çª—å£è®¡ç®—

      æ‰¹å¤„ç†æ¨¡å—
        æ•°æ®æŠ½å–
        æ•°æ®è½¬æ¢
        æ•°æ®åŠ è½½

      æ•°æ®å­˜å‚¨æ¨¡å—
        OLTP å­˜å‚¨
        OLAP å­˜å‚¨
        ç¼“å­˜ç®¡ç†
        å¯¹è±¡å­˜å‚¨
```

### 5.3 æ¨¡å—ä¾èµ–å…³ç³»

```mermaid
graph LR
    subgraph "Layer 1: åŸºç¡€å±‚"
        L1_1[é…ç½®ä¸­å¿ƒ]
        L1_2[æœåŠ¡å‘ç°]
        L1_3[è®¤è¯æœåŠ¡]
    end

    subgraph "Layer 2: æ•°æ®å±‚"
        L2_1[æ•°æ®å­˜å‚¨]
        L2_2[ç¼“å­˜æœåŠ¡]
        L2_3[æ¶ˆæ¯é˜Ÿåˆ—]
    end

    subgraph "Layer 3: æ•°æ®å¤„ç†å±‚"
        L3_1[æµå¤„ç†]
        L3_2[æ‰¹å¤„ç†]
        L3_3[ç‰¹å¾å·¥ç¨‹]
    end

    subgraph "Layer 4: æ ¸å¿ƒä¸šåŠ¡å±‚"
        L4_1[è­¦æŠ¥æ£€æµ‹]
        L4_2[AI åˆ†æ]
        L4_3[è§„åˆ™éƒ¨ç½²]
        L4_4[é€šçŸ¥æœåŠ¡]
    end

    subgraph "Layer 5: è‡ªåŠ¨åŒ–å±‚"
        L5_1[è§„åˆ™ç”Ÿæˆ]
        L5_2[æ¨¡å‹è®­ç»ƒ]
        L5_3[è§„åˆ™æ²»ç†]
    end

    subgraph "Layer 6: æ¥å£å±‚"
        L6_1[API ç½‘å…³]
    end

    subgraph "Layer 7: å±•ç¤ºå±‚"
        L7_1[Web å‰ç«¯]
    end

    L1_1 & L1_2 & L1_3 --> L2_1 & L2_2 & L2_3
    L2_1 & L2_2 & L2_3 --> L3_1 & L3_2 & L3_3
    L3_1 & L3_2 & L3_3 --> L4_1 & L4_2 & L4_3 & L4_4
    L4_1 & L4_2 & L4_3 --> L5_1 & L5_2 & L5_3
    L4_1 & L4_2 & L4_3 & L4_4 & L5_1 & L5_2 & L5_3 --> L6_1
    L6_1 --> L7_1

    style Layer1:åŸºç¡€å±‚ fill:#fce4ec
    style Layer2:æ•°æ®å±‚ fill:#e8f5e9
    style Layer3:æ•°æ®å¤„ç†å±‚ fill:#fff3e0
    style Layer4:æ ¸å¿ƒä¸šåŠ¡å±‚ fill:#e3f2fd
    style Layer5:è‡ªåŠ¨åŒ–å±‚ fill:#f3e5f5
    style Layer6:æ¥å£å±‚ fill:#d1c4e9
    style Layer7:å±•ç¤ºå±‚ fill:#c8e6c9
```

---

## 6. å­æ¨¡å—äº¤äº’ & æµç¨‹

### 6.1 å®æ—¶è­¦æŠ¥æ£€æµ‹æµç¨‹ï¼ˆæ¨¡å—äº¤äº’ï¼‰

```mermaid
sequenceDiagram
    participant Kafka as Kafka<br/>æ¶ˆæ¯é˜Ÿåˆ—
    participant Stream as æµå¤„ç†æ¨¡å—<br/>Flink
    participant Monitor as æŒ‡æ ‡ç›‘æ§å™¨<br/>è­¦æŠ¥æ£€æµ‹æ¨¡å—
    participant Threshold as é˜ˆå€¼æ£€æŸ¥å™¨<br/>è­¦æŠ¥æ£€æµ‹æ¨¡å—
    participant Generator as è­¦æŠ¥ç”Ÿæˆå™¨<br/>è­¦æŠ¥æ£€æµ‹æ¨¡å—
    participant Feature as ç‰¹å¾æå–å™¨<br/>AI åˆ†ææ¨¡å—
    participant Model as æ¨¡å‹æ¨ç†å¼•æ“<br/>AI åˆ†ææ¨¡å—
    participant Recommender as è§„åˆ™æ¨èå™¨<br/>AI åˆ†ææ¨¡å—
    participant Notifier as é€šçŸ¥æ¨¡å—
    participant DB as PostgreSQL
    participant Cache as Redis

    Kafka->>Stream: 1. æ¥æ”¶äº¤æ˜“äº‹ä»¶æµ
    Stream->>Stream: 2. çª—å£èšåˆ
    Stream->>Monitor: 3. è®¡ç®—å®æ—¶æŒ‡æ ‡

    Monitor->>Cache: 4. ç¼“å­˜æŒ‡æ ‡æ•°æ®
    Monitor->>Threshold: 5. å‘é€æŒ‡æ ‡

    Threshold->>Threshold: 6. æ£€æŸ¥é˜ˆå€¼

    alt é˜ˆå€¼çªç ´
        Threshold->>Generator: 7. è§¦å‘è­¦æŠ¥ç”Ÿæˆ
        Generator->>DB: 8. æŸ¥è¯¢å†å²æ•°æ®
        DB-->>Generator: 9. è¿”å›å†å²æ•°æ®

        Generator->>Generator: 10. åˆ†ç±»è­¦æŠ¥ï¼ˆP1/P2/P3ï¼‰
        Generator->>DB: 11. ä¿å­˜è­¦æŠ¥

        Generator->>Feature: 12. è¯·æ±‚ AI åˆ†æ
        Feature->>DB: 13. åŠ è½½äº¤æ˜“æ˜ç»†
        DB-->>Feature: 14. è¿”å›äº¤æ˜“æ•°æ®

        Feature->>Feature: 15. æå–ç‰¹å¾
        Feature->>Model: 16. è°ƒç”¨æ¨¡å‹æ¨ç†

        par å¹¶è¡Œæ¨ç†
            Model->>Model: æ”»å‡»åˆ†ç±»
        and
            Model->>Model: èšç±»åˆ†æ
        and
            Model->>Model: å¼‚å¸¸æ£€æµ‹
        end

        Model->>Recommender: 17. æ¨ç†ç»“æœ
        Recommender->>Recommender: 18. ç”Ÿæˆè§„åˆ™æ¨è
        Recommender->>Recommender: 19. è®¡ç®—ç½®ä¿¡åº¦

        Recommender->>DB: 20. ä¿å­˜åˆ†æç»“æœ
        Recommender->>Generator: 21. è¿”å›åˆ†ææŠ¥å‘Š

        Generator->>Notifier: 22. å‘é€é€šçŸ¥è¯·æ±‚

        par å¤šæ¸ é“é€šçŸ¥
            Notifier->>Notifier: åº”ç”¨å†…æ¨é€
        and
            Notifier->>Notifier: é‚®ä»¶é€šçŸ¥
        and
            Notifier->>Notifier: çŸ­ä¿¡é€šçŸ¥ï¼ˆP1ï¼‰
        end

        Notifier->>DB: 23. è®°å½•é€šçŸ¥çŠ¶æ€
    else æ­£å¸¸
        Threshold->>Monitor: ç»§ç»­ç›‘æ§
    end
```

### 6.2 è§„åˆ™éƒ¨ç½²æµç¨‹ï¼ˆæ¨¡å—äº¤äº’ï¼‰

```mermaid
sequenceDiagram
    participant UI as Web å‰ç«¯
    participant Gateway as API ç½‘å…³
    participant Auth as è®¤è¯æ¨¡å—
    participant RuleAPI as è§„åˆ™éƒ¨ç½²æ¨¡å—<br/>API å±‚
    participant Validator as è§„åˆ™éªŒè¯å™¨
    participant Shadow as å½±å­éƒ¨ç½²å™¨
    participant Monitor as æ€§èƒ½ç›‘æ§å™¨
    participant LiveDeploy as ä¸Šçº¿ç®¡ç†å™¨
    participant RiskEngine as é£é™©å¼•æ“
    participant Notifier as é€šçŸ¥æ¨¡å—
    participant DB as PostgreSQL
    participant Cache as Redis

    UI->>Gateway: 1. POST /rules/deploy
    Gateway->>Auth: 2. éªŒè¯ Token
    Auth-->>Gateway: 3. Token æœ‰æ•ˆ

    Gateway->>RuleAPI: 4. è½¬å‘è¯·æ±‚
    RuleAPI->>DB: 5. æŸ¥è¯¢è§„åˆ™å®šä¹‰
    DB-->>RuleAPI: 6. è¿”å›è§„åˆ™

    RuleAPI->>Validator: 7. éªŒè¯è§„åˆ™

    par å¹¶è¡ŒéªŒè¯
        Validator->>Validator: è¯­æ³•æ£€æŸ¥
    and
        Validator->>DB: æŸ¥è¯¢ç°æœ‰è§„åˆ™
        DB-->>Validator: è¿”å›è§„åˆ™åˆ—è¡¨
        Validator->>Validator: å†²çªæ£€æµ‹
    and
        Validator->>Validator: å½±å“è¯„ä¼°
    end

    Validator-->>RuleAPI: 8. éªŒè¯é€šè¿‡

    RuleAPI->>Shadow: 9. éƒ¨ç½²åˆ°å½±å­ç¯å¢ƒ
    Shadow->>RiskEngine: 10. æ¨é€å½±å­è§„åˆ™
    RiskEngine-->>Shadow: 11. ç¡®è®¤éƒ¨ç½²

    Shadow->>Cache: 12. ç¼“å­˜å½±å­çŠ¶æ€
    Shadow->>DB: 13. è®°å½•éƒ¨ç½²

    Shadow-->>UI: 14. è¿”å›éƒ¨ç½² ID (WebSocket)

    loop ç›‘æ§ 5-10 åˆ†é’Ÿ
        RiskEngine->>Monitor: 15. ä¸ŠæŠ¥æ€§èƒ½æŒ‡æ ‡
        Monitor->>Monitor: 16. è®¡ç®—æŒ‡æ ‡
        Monitor->>Cache: 17. æ›´æ–°ç¼“å­˜
        Monitor-->>UI: 18. æ¨é€æŒ‡æ ‡ (WebSocket)
    end

    Monitor->>Monitor: 19. è¯„ä¼°æ€§èƒ½

    alt æ€§èƒ½è¾¾æ ‡
        Monitor->>LiveDeploy: 20. è¯·æ±‚ä¸Šçº¿
        LiveDeploy->>RiskEngine: 21. ä¸Šçº¿è§„åˆ™
        RiskEngine-->>LiveDeploy: 22. ç¡®è®¤ä¸Šçº¿

        LiveDeploy->>DB: 23. æ›´æ–°çŠ¶æ€ä¸º LIVE
        LiveDeploy->>Cache: 24. æ›´æ–°ç¼“å­˜

        LiveDeploy->>Notifier: 25. å‘é€æˆåŠŸé€šçŸ¥
        Notifier-->>UI: 26. æ¨é€æˆåŠŸæ¶ˆæ¯

    else æ€§èƒ½ä¸ä½³
        Monitor->>Notifier: 20. å‘é€ä¼˜åŒ–å»ºè®®
        Notifier-->>UI: 21. æ¨é€ä¼˜åŒ–å»ºè®®
    end
```

### 6.3 è§„åˆ™è‡ªåŠ¨ç”Ÿæˆæµç¨‹ï¼ˆæ¨¡å—äº¤äº’ï¼‰

```mermaid
flowchart TD
    Start([å®šæ—¶ä»»åŠ¡è§¦å‘<br/>æˆ–æ‰‹åŠ¨è§¦å‘]) --> Scheduler[è°ƒåº¦å™¨<br/>Airflow]

    Scheduler --> DataPrep[æ•°æ®å‡†å¤‡å™¨<br/>è§„åˆ™ç”Ÿæˆæ¨¡å—]

    DataPrep --> QueryBQ[æŸ¥è¯¢ BigQuery]
    QueryBQ --> ExtractData[æå–è®­ç»ƒæ•°æ®]
    ExtractData --> LabelData[æ ‡æ³¨æ•°æ®]

    LabelData --> FeatureEng[ç‰¹å¾å·¥ç¨‹æ¨¡å—]
    FeatureEng --> CalcFeatures[è®¡ç®—ç‰¹å¾]
    CalcFeatures --> SaveFeatures[ä¿å­˜åˆ°ç‰¹å¾åº“]

    SaveFeatures --> AlgoSelect[ç®—æ³•é€‰æ‹©å™¨<br/>è§„åˆ™ç”Ÿæˆæ¨¡å—]
    AlgoSelect --> ChooseAlgo{é€‰æ‹©ç®—æ³•}

    ChooseAlgo -->|åˆ†ç±»ä»»åŠ¡| XGBoost[XGBoost è®­ç»ƒ]
    ChooseAlgo -->|ä¼˜åŒ–ä»»åŠ¡| Greedy[è´ªå¿ƒæœç´¢]
    ChooseAlgo -->|èšç±»ä»»åŠ¡| Clustering[èšç±»ç®—æ³•]

    XGBoost --> RuleGen[è§„åˆ™è®­ç»ƒå™¨]
    Greedy --> RuleGen
    Clustering --> RuleGen

    RuleGen --> GenCandidates[ç”Ÿæˆè§„åˆ™å€™é€‰é›†]
    GenCandidates --> RuleOpt[è§„åˆ™ä¼˜åŒ–å™¨]

    RuleOpt --> RankRules[è§„åˆ™æ’åº]
    RankRules --> FilterRules[è¿‡æ»¤ä½è´¨é‡è§„åˆ™]
    FilterRules --> SaveRules[ä¿å­˜åˆ°æ•°æ®åº“]

    SaveRules --> BacktestMod[å›æµ‹æ¨¡å—]
    BacktestMod --> LoadHistory[åŠ è½½å†å²æ•°æ®]
    LoadHistory --> SimulateRule[æ¨¡æ‹Ÿè§„åˆ™æ‰§è¡Œ]
    SimulateRule --> CalcMetrics[è®¡ç®—æ€§èƒ½æŒ‡æ ‡]

    CalcMetrics --> CheckQuality{è´¨é‡æ£€æŸ¥}

    CheckQuality -->|é€šè¿‡| Approved[æ ‡è®°ä¸ºå·²æ‰¹å‡†]
    CheckQuality -->|ä¸é€šè¿‡| Rejected[æ ‡è®°ä¸ºå·²æ‹’ç»]
    CheckQuality -->|éœ€è°ƒä¼˜| NeedTune[è‡ªåŠ¨è°ƒä¼˜]

    NeedTune --> RuleOpt

    Approved --> NotifyOps[é€šçŸ¥è¿è¥å›¢é˜Ÿ]
    NotifyOps --> ManualReview[äººå·¥å®¡æ ¸]

    ManualReview --> ShadowDeploy[å½±å­éƒ¨ç½²]
    ShadowDeploy --> End([å®Œæˆ])

    Rejected --> LogResult[è®°å½•ç»“æœ]
    LogResult --> End

    style DataPrep fill:#e3f2fd
    style FeatureEng fill:#fff3e0
    style RuleGen fill:#f3e5f5
    style BacktestMod fill:#e8f5e9
```

### 6.4 æ¨¡å‹è®­ç»ƒä¸æ›´æ–°æµç¨‹ï¼ˆæ¨¡å—äº¤äº’ï¼‰

```mermaid
sequenceDiagram
    participant Scheduler as Airflow<br/>è°ƒåº¦å™¨
    participant DataMod as æ‰¹å¤„ç†æ¨¡å—<br/>Spark
    participant FeatureMod as ç‰¹å¾å·¥ç¨‹æ¨¡å—
    participant TrainMod as æ¨¡å‹è®­ç»ƒæ¨¡å—
    participant EvalMod as æ¨¡å‹è¯„ä¼°å™¨
    participant Registry as æ¨¡å‹æ³¨å†Œè¡¨
    participant Serving as æ¨¡å‹æœåŠ¡
    participant AIMod as AI åˆ†ææ¨¡å—
    participant DB as PostgreSQL
    participant BQ as BigQuery
    participant S3 as S3 å¯¹è±¡å­˜å‚¨

    Note over Scheduler: æ¯æ—¥å‡Œæ™¨ 2:00 è§¦å‘

    Scheduler->>DataMod: 1. å¯åŠ¨æ•°æ®å‡†å¤‡ä»»åŠ¡
    DataMod->>BQ: 2. æŸ¥è¯¢è¿‡å» 30 å¤©äº¤æ˜“æ•°æ®
    BQ-->>DataMod: 3. è¿”å›æ•°æ®

    DataMod->>DataMod: 4. æ•°æ®æ¸…æ´—å’Œè½¬æ¢
    DataMod->>S3: 5. ä¿å­˜åˆ°æ•°æ®æ¹–

    DataMod->>FeatureMod: 6. è§¦å‘ç‰¹å¾è®¡ç®—
    FeatureMod->>S3: 7. è¯»å–åŸå§‹æ•°æ®
    FeatureMod->>FeatureMod: 8. ç‰¹å¾å·¥ç¨‹
    FeatureMod->>DB: 9. ä¿å­˜ç‰¹å¾å®šä¹‰
    FeatureMod->>S3: 10. ä¿å­˜ç‰¹å¾æ•°æ®

    FeatureMod->>TrainMod: 11. è§¦å‘æ¨¡å‹è®­ç»ƒ
    TrainMod->>S3: 12. åŠ è½½ç‰¹å¾æ•°æ®
    TrainMod->>TrainMod: 13. æ•°æ®åˆ†å‰²

    loop è¶…å‚æ•°è°ƒä¼˜
        TrainMod->>TrainMod: 14. è®­ç»ƒæ¨¡å‹
        TrainMod->>EvalMod: 15. è¯„ä¼°æ¨¡å‹
        EvalMod->>EvalMod: 16. è®¡ç®—æŒ‡æ ‡
        EvalMod-->>TrainMod: 17. è¿”å›è¯„ä¼°ç»“æœ
    end

    TrainMod->>EvalMod: 18. æœ€ä½³æ¨¡å‹è¯„ä¼°
    EvalMod->>DB: 19. æŸ¥è¯¢å† å†›æ¨¡å‹æ€§èƒ½
    DB-->>EvalMod: 20. è¿”å›å† å†›æ¨¡å‹æŒ‡æ ‡

    EvalMod->>EvalMod: 21. å¯¹æ¯”æ€§èƒ½

    alt æ–°æ¨¡å‹æ›´å¥½
        EvalMod->>Registry: 22. æ³¨å†ŒæŒ‘æˆ˜è€…æ¨¡å‹
        Registry->>S3: 23. ä¿å­˜æ¨¡å‹æ–‡ä»¶
        Registry->>DB: 24. ä¿å­˜æ¨¡å‹å…ƒæ•°æ®

        Registry->>Serving: 25. éƒ¨ç½²åˆ° A/B æµ‹è¯•
        Serving->>Serving: 26. åŠ è½½æ¨¡å‹

        Note over Serving,AIMod: A/B æµ‹è¯• 7 å¤©

        loop æ¯å¤©æ£€æŸ¥
            Serving->>DB: 27. è®°å½•æ¨ç†ç»“æœ
            Registry->>DB: 28. æŸ¥è¯¢ A/B æµ‹è¯•æŒ‡æ ‡
            DB-->>Registry: 29. è¿”å›æŒ‡æ ‡
        end

        alt æŒ‘æˆ˜è€…èƒœå‡º
            Registry->>Serving: 30. æå‡ä¸ºå† å†›æ¨¡å‹
            Serving->>AIMod: 31. æ›´æ–°ç”Ÿäº§æ¨¡å‹
            Registry->>DB: 32. æ›´æ–°æ¨¡å‹çŠ¶æ€
            Registry->>Scheduler: 33. å‘é€æˆåŠŸé€šçŸ¥
        else å† å†›ä¿æŒ
            Registry->>Serving: 30. å›æ»šæŒ‘æˆ˜è€…
            Registry->>DB: 31. æ ‡è®°ä¸ºå¤±è´¥
        end

    else æ–°æ¨¡å‹ä¸å¦‚å† å†›
        EvalMod->>DB: 22. è®°å½•è®­ç»ƒå¤±è´¥
        EvalMod->>Scheduler: 23. å‘é€å¤±è´¥é€šçŸ¥
    end
```

### 6.5 å®Œæ•´ç«¯åˆ°ç«¯æµç¨‹æ•´åˆ

```mermaid
graph TB
    subgraph "é˜¶æ®µ 1: å®æ—¶ç›‘æ§"
        S1_1[äº¤æ˜“æµæ¥å…¥]
        S1_2[å®æ—¶æŒ‡æ ‡è®¡ç®—]
        S1_3[é˜ˆå€¼æ£€æŸ¥]
        S1_4[è­¦æŠ¥è§¦å‘]
    end

    subgraph "é˜¶æ®µ 2: æ™ºèƒ½åˆ†æ"
        S2_1[æ•°æ®æ”¶é›†]
        S2_2[ç‰¹å¾æå–]
        S2_3[AI æ¨¡å‹æ¨ç†]
        S2_4[æ”»å‡»åˆ†ç±»]
        S2_5[è§„åˆ™æ¨è]
    end

    subgraph "é˜¶æ®µ 3: å•†æˆ·å†³ç­–"
        S3_1[å¤šæ¸ é“é€šçŸ¥]
        S3_2[å±•ç¤ºåˆ†ææŠ¥å‘Š]
        S3_3[å•†æˆ·æ“ä½œ]
    end

    subgraph "é˜¶æ®µ 4: è§„åˆ™éƒ¨ç½²"
        S4_1[è§„åˆ™éªŒè¯]
        S4_2[å½±å­éƒ¨ç½²]
        S4_3[æ€§èƒ½ç›‘æ§]
        S4_4[è‡ªåŠ¨ä¸Šçº¿]
    end

    subgraph "é˜¶æ®µ 5: æ•ˆæœç›‘æ§"
        S5_1[æ‹¦æˆªç»Ÿè®¡]
        S5_2[æ€§èƒ½è·Ÿè¸ª]
        S5_3[åé¦ˆæ”¶é›†]
    end

    subgraph "é˜¶æ®µ 6: æŒç»­ä¼˜åŒ–"
        S6_1[æ•°æ®æ ‡æ³¨]
        S6_2[æ¨¡å‹é‡è®­ç»ƒ]
        S6_3[è§„åˆ™ä¼˜åŒ–]
        S6_4[ç³»ç»Ÿè¿­ä»£]
    end

    S1_1 --> S1_2 --> S1_3 --> S1_4
    S1_4 --> S2_1 --> S2_2 --> S2_3 --> S2_4 --> S2_5
    S2_5 --> S3_1 --> S3_2 --> S3_3
    S3_3 --> S4_1 --> S4_2 --> S4_3 --> S4_4
    S4_4 --> S5_1 --> S5_2 --> S5_3
    S5_3 --> S6_1 --> S6_2 --> S6_3 --> S6_4

    S6_4 -.åé¦ˆå¾ªç¯.-> S2_3
    S5_2 -.æ€§èƒ½ä¸‹é™.-> S6_3

    style é˜¶æ®µ1:å®æ—¶ç›‘æ§ fill:#e3f2fd
    style é˜¶æ®µ2:æ™ºèƒ½åˆ†æ fill:#fff3e0
    style é˜¶æ®µ3:å•†æˆ·å†³ç­– fill:#e8f5e9
    style é˜¶æ®µ4:è§„åˆ™éƒ¨ç½² fill:#f3e5f5
    style é˜¶æ®µ5:æ•ˆæœç›‘æ§ fill:#ffe0b2
    style é˜¶æ®µ6:æŒç»­ä¼˜åŒ– fill:#d1c4e9
```

---

## é™„å½•

### A. æŠ€æœ¯æ ˆæ€»ç»“

| å±‚çº§ | æŠ€æœ¯é€‰å‹ | è¯´æ˜ |
|------|---------|------|
| **å‰ç«¯** | React 18 + TypeScript + Material-UI | ç°ä»£åŒ– UI æ¡†æ¶ |
| **API ç½‘å…³** | Kong / APISIX | é«˜æ€§èƒ½ API ç½‘å…³ |
| **åç«¯æœåŠ¡** | Python (FastAPI) + Go | Python ç”¨äº AI/MLï¼ŒGo ç”¨äºé«˜æ€§èƒ½æœåŠ¡ |
| **å®æ—¶å¤„ç†** | Apache Kafka + Flink | æµå¤„ç†å¹³å° |
| **æ‰¹å¤„ç†** | Apache Spark + Airflow | å¤§æ•°æ®å¤„ç† |
| **ML æ¡†æ¶** | XGBoost, scikit-learn, TensorFlow | æœºå™¨å­¦ä¹  |
| **æ¨¡å‹æœåŠ¡** | TensorFlow Serving / Seldon | æ¨¡å‹æ¨ç† |
| **ç‰¹å¾å­˜å‚¨** | Feast | ç‰¹å¾ç®¡ç† |
| **OLTP** | PostgreSQL 15+ | äº‹åŠ¡æ•°æ®åº“ |
| **OLAP** | Google BigQuery | åˆ†ææ•°æ®åº“ |
| **ç¼“å­˜** | Redis Cluster | åˆ†å¸ƒå¼ç¼“å­˜ |
| **å¯¹è±¡å­˜å‚¨** | AWS S3 / GCS | æ–‡ä»¶å­˜å‚¨ |
| **å®¹å™¨ç¼–æ’** | Kubernetes | å®¹å™¨ç®¡ç† |
| **ç›‘æ§** | Prometheus + Grafana | ç›‘æ§å‘Šè­¦ |
| **æ—¥å¿—** | ELK Stack | æ—¥å¿—åˆ†æ |
| **è¿½è¸ª** | Jaeger | åˆ†å¸ƒå¼è¿½è¸ª |

### B. å…³é”®æŒ‡æ ‡å®šä¹‰

| æŒ‡æ ‡ | å®šä¹‰ | ç›®æ ‡å€¼ |
|------|------|--------|
| **è­¦æŠ¥æ£€æµ‹å»¶è¿Ÿ** | ä»äº¤æ˜“å‘ç”Ÿåˆ°è­¦æŠ¥ç”Ÿæˆçš„æ—¶é—´ | < 1 ç§’ |
| **AI åˆ†ææ—¶é—´** | AI åˆ†æå®Œæˆæ‰€éœ€æ—¶é—´ | < 5 ç§’ |
| **è§„åˆ™éƒ¨ç½²æ—¶é—´** | ä»ç‚¹å‡»éƒ¨ç½²åˆ°è§„åˆ™ç”Ÿæ•ˆçš„æ—¶é—´ | < 30 ç§’ |
| **ç³»ç»Ÿå¯ç”¨æ€§** | ç³»ç»Ÿæ­£å¸¸è¿è¡Œæ—¶é—´ç™¾åˆ†æ¯” | > 99.9% |
| **ç²¾ç¡®ç‡** | çœŸæ­£ä¾‹ / (çœŸæ­£ä¾‹ + å‡æ­£ä¾‹) | > 95% |
| **å¬å›ç‡** | çœŸæ­£ä¾‹ / (çœŸæ­£ä¾‹ + å‡è´Ÿä¾‹) | > 85% |
| **è¯¯æŠ¥ç‡** | å‡æ­£ä¾‹ / (å‡æ­£ä¾‹ + çœŸè´Ÿä¾‹) | < 1% |

### C. å®æ–½è®¡åˆ’

| é˜¶æ®µ | æ—¶é—´ | ä¸»è¦äº¤ä»˜ç‰© |
|------|------|-----------|
| **Phase 1 - MVP** | 2025 Q4 | åŸºç¡€è­¦æŠ¥æ£€æµ‹ + ä¸€é”®éƒ¨ç½² + å¡æµ‹è¯•æ£€æµ‹ |
| **Phase 2 - è‡ªåŠ¨åŒ–** | 2026 Q1 | è§„åˆ™è‡ªåŠ¨ç”Ÿæˆ + è‡ªåŠ¨é€€å½¹ + å›æµ‹åŠŸèƒ½ |
| **Phase 3 - é«˜çº§åŠŸèƒ½** | 2026 Q2 | Auto-On æ¨¡å¼ + å¤šæ”»å‡»å‘é‡ + é«˜çº§åˆ†æ |
| **Phase 4 - ä¼˜åŒ–æ‰©å±•** | 2026 Q3 | å¤šåŒºåŸŸéƒ¨ç½² + ç­–ç•¥è‡ªåŠ¨åŒ– + AI ç‰¹å¾ç”Ÿæˆ |

---

**æ–‡æ¡£çŠ¶æ€ï¼š** å¾…è¯„å®¡
**åˆ›å»ºæ—¥æœŸï¼š** 2025-11-14
**æœ€åæ›´æ–°ï¼š** 2025-11-14
**ç»´æŠ¤è€…ï¼š** æŠ€æœ¯æ¶æ„å›¢é˜Ÿ
